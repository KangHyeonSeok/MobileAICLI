# 📝 개발 문서 작성 가이드라인

## 목적

이 문서는 MobileAICLI 프로젝트의 개발 문서를 **비개발자도 이해할 수 있도록** 작성하기 위한 가이드라인입니다.

> ⚠️ **핵심 원칙**: 코드는 AI가 생성합니다. 문서는 **설계와 의사결정**에 집중하세요.

---

## 🎯 AI 시대의 문서 작성 철학

### 코드 vs 설계

| 항목 | 문서에 포함? | 이유 |
|------|-------------|------|
| 코드 구현 | ❌ 최소화 | AI가 생성 가능 |
| **설계 결정** | ✅ 필수 | AI에게 방향 제시 |
| **제약 조건** | ✅ 필수 | AI가 알 수 없는 맥락 |
| **트레이드오프** | ✅ 필수 | 왜 A를 선택했는지 |
| API 스펙/인터페이스 | ⚠️ 선택적 | 계약 정의 시에만 |

### 문서의 역할
```
문서 = AI에게 주는 "설계 지시서"
     ≠ 복사-붙여넣기용 코드 저장소
```

**좋은 문서는 AI에게 "무엇을 만들지"와 "왜 그렇게 만들어야 하는지"를 알려줍니다.**

---

## 📋 문서 작성 원칙

### 1. 독자 중심 작성
- **주요 독자**: 프로젝트 관리자, 기획자, 개발자, **AI 코딩 어시스턴트**
- 기술적 배경지식이 없어도 **무엇을 하는지** 이해할 수 있어야 함
- 코드는 최소화하고, 필요시 별도 섹션이나 접기(collapse)로 처리

### 2. 문서 구조 템플릿

```markdown
# [기능명] 개발 계획

## 1. 개요
- 이 기능이 무엇인지 한 문장으로 설명
- 왜 필요한지 (배경/문제점)
- 완료되면 사용자가 얻는 가치

## 2. 현재 상태
- 지금 어떻게 동작하는지
- 무엇이 문제인지

## 3. 목표
- 구체적이고 측정 가능한 목표
- 성공 기준 (어떻게 되면 완료인지)

## 4. 접근 방법
- 어떤 방식으로 해결할 것인지 (기술 용어 최소화)
- 왜 이 방법을 선택했는지
- 대안이 있다면 왜 선택하지 않았는지

## 5. 작업 단계
- 단계별 할 일 목록 (체크박스)
- 각 단계의 예상 소요 시간
- 의존성 (선행 작업)

## 6. 일정
- 전체 예상 기간
- 마일스톤별 일정표

## 7. 위험 요소
- 예상되는 문제점
- 대응 방안

## 8. 기술 상세 (접기)
<details>
<summary>개발자용 상세 내용 (클릭하여 펼치기)</summary>

여기에 코드, API 명세, 기술적 세부사항 포함

</details>
```

---

## ✅ 좋은 문서 예시

### Before (코드 중심) ❌

```
## 구현 방법

CopilotService.cs를 다음과 같이 수정합니다:

\`\`\`csharp
public async Task<CopilotResponse> SendPromptAsync(string prompt)
{
    var startInfo = new ProcessStartInfo
    {
        FileName = "copilot",
        Arguments = $"-p \"{prompt}\""
    };
    // ... 200줄의 코드 ...
}
\`\`\`
```

### After (이해 중심) ✅

```
## 4. 접근 방법

### Copilot CLI와 통신하는 방식

1. **사용자가 질문 입력** → 웹 UI에서 텍스트 입력
2. **서버가 Copilot CLI 호출** → 백그라운드에서 `copilot -p "질문"` 실행
3. **응답을 실시간 전송** → SignalR로 글자 단위로 스트리밍
4. **UI에 표시** → 채팅처럼 말풍선으로 보여줌

```
[사용자] ──질문──▶ [웹서버] ──호출──▶ [Copilot CLI]
                      │                      │
                      ◀────실시간 응답─────────┘
```

### 왜 이 방식인가?

| 방식 | 장점 | 단점 | 선택 |
|------|------|------|------|
| 직접 API 호출 | 빠름 | API 없음 | ❌ |
| CLI 호출 | 공식 지원 | 약간 느림 | ✅ |
| 웹소켓 세션 | 대화 유지 | 복잡함 | ❌ |

<details>
<summary>🔧 개발자용: 코드 상세</summary>

\`\`\`csharp
// CopilotService.cs 핵심 부분만
public async IAsyncEnumerable<string> SendPromptStreamingAsync(string prompt)
{
    // ... 코드 ...
}
\`\`\`

</details>
```

---

## 📊 시각 자료 활용

### 1. 다이어그램 (Mermaid 또는 ASCII)
```
사용자 흐름:
┌──────┐    ┌──────┐    ┌──────┐
│ 입력 │ ─▶ │ 처리 │ ─▶ │ 결과 │
└──────┘    └──────┘    └──────┘
```

### 2. 비교 표
| 항목 | 현재 | 목표 |
|------|------|------|
| 응답 시간 | 5초 | 1초 |
| 지원 기능 | 2개 | 5개 |

### 3. 타임라인
```
Week 1        Week 2        Week 3
│─────────────│─────────────│
[  설계  ][   개발   ][ 테스트 ]
```

### 4. 스크린샷/목업
- UI 변경 시 Before/After 이미지 첨부
- 와이어프레임이나 목업 포함

---

## 🚫 피해야 할 것

1. **코드 블록 남발하지 않기**
   - ❌ 100줄 이상의 코드 블록
   - ✅ 코드는 AI가 생성함. 필요시 인터페이스/시그니처만 명시

2. **코드로 시작하지 않기**
   - ❌ "다음 코드를 추가합니다..."
   - ✅ "이 기능은 ~ 를 합니다. 설계 의도는..."

3. **약어 설명 없이 사용하지 않기**
   - ❌ "SignalR로 스트리밍"
   - ✅ "SignalR(실시간 통신 기술)로 스트리밍"

4. **기술 용어 나열하지 않기**
   - ❌ "PTY, WebSocket, IAsyncEnumerable 사용"
   - ✅ "터미널 출력을 실시간으로 웹에 전달"

5. **이유 없이 결정하지 않기**
   - ❌ "A 방식을 사용합니다"
   - ✅ "A 방식을 사용합니다. B보다 간단하고 C보다 안정적이기 때문입니다"

6. **구현 세부사항 미리 정하지 않기**
   - ❌ "변수명은 `_copilotProcess`로 하고..."
   - ✅ "프로세스 생명주기를 관리해야 함" (방법은 AI가 결정)

---

## 📁 문서 파일 명명 규칙

```
docs/
├── DEVELOPMENT_PLAN.md          # 전체 개발 계획 (개요)
├── DOCUMENTATION_GUIDELINES.md  # 이 문서
├── features/
│   ├── 01_COPILOT_INTEGRATION.md    # 기능별 상세
│   ├── 02_FILE_BROWSER.md
│   └── 03_TERMINAL.md
├── guides/
│   ├── SETUP_GUIDE.md           # 설치/설정 가이드
│   └── USER_GUIDE.md            # 사용자 가이드
└── technical/
    ├── ARCHITECTURE.md          # 기술 아키텍처 (개발자용)
    └── API_REFERENCE.md         # API 문서 (개발자용)
```

---

## ✏️ 체크리스트

문서 작성 시 확인사항:

- [ ] 비개발자가 읽어도 **무엇**을 하는지 이해되는가?
- [ ] **왜** 이 기능이 필요한지 설명되어 있는가?
- [ ] 코드 블록이 20줄을 넘지 않는가? (넘으면 삭제하고 설계 의도만 남기기)
- [ ] 다이어그램이나 표로 시각화되어 있는가?
- [ ] 전문 용어에 괄호 설명이 있는가?
- [ ] 일정과 작업 단계가 명확한가?
- [ ] AI가 이 문서만 보고 구현할 수 있는 충분한 **맥락**이 있는가?

---

## 📂 프로젝트 현황 (2024년 12월 기준)

### 완료된 작업
- ✅ 모바일 사이드바 (플로팅 토글 버튼)
- ✅ InteractiveServer 렌더모드 설정
- ✅ 포트 5252 설정 (개발/운영 통일)
- ✅ 외부 접속 허용 (0.0.0.0 바인딩)
- ✅ PM2 배포 설정 (GitHub Actions)

### 진행 예정
| 기능 | 문서 | 상태 |
|------|------|------|
| Copilot CLI 연동 | `features/01_COPILOT_INTEGRATION.md` | 📝 설계 완료 |
| 파일 브라우저 | `features/02_FILE_BROWSER.md` | ⏳ 예정 |
| 터미널 | `features/03_TERMINAL.md` | ⏳ 예정 |

### 문서 구조
```
docs/
├── DOCUMENTATION_GUIDELINES.md  # 👈 이 문서 (작성 지침)
├── features/                    # 기능별 설계 문서 (사용자/PM용)
│   └── 01_COPILOT_INTEGRATION.md
└── technical/                   # 기술 참고 문서 (개발자용, 코드 포함 가능)
    └── IMPLEMENTATION_*.md
```

---

## 🤖 AI와 협업하는 문서 작성

이 프로젝트는 AI 코딩 어시스턴트와 함께 개발합니다.

### 문서가 AI에게 전달해야 할 것
1. **목표**: 무엇을 만들어야 하는가
2. **제약**: 무엇을 하면 안 되는가 (보안, 성능 등)
3. **맥락**: 왜 이렇게 해야 하는가
4. **기존 코드**: 어떤 패턴을 따라야 하는가

### 문서가 AI에게 맡겨야 할 것
- 구체적인 코드 구현
- 변수명, 함수명 결정
- 에러 처리 세부사항
- 최적화 방법

### 예시: AI에게 주는 좋은 지시

```markdown
## 설계 요구사항

### 목표
- Copilot CLI의 응답을 실시간으로 UI에 표시

### 제약 조건
- 기존 서비스 패턴(IOptions + ILogger 주입) 따를 것
- RepositoryPath 외부 접근 차단
- 타임아웃 30초

### 참고
- 기존 CopilotService.cs 구조 유지
- SignalR Hub 사용 (실시간 통신)
```

❌ **나쁜 예**: 200줄의 코드를 미리 작성해두기
✅ **좋은 예**: 제약과 맥락만 주고 AI가 구현하게 하기

---

*이 가이드라인을 참고하여 모든 개발 문서를 작성합니다.*
*문서 작성 시 이 파일을 먼저 읽어주세요: `docs/DOCUMENTATION_GUIDELINES.md`*
